# Инструкция по перехвату заголовков CP API

## Способ 1: Использование HTML-помощника

1. Откройте файл `capture-headers.html` в браузере
2. Следуйте инструкциям на странице

## Способ 2: Ручной перехват через DevTools

### Шаги:

1. **Откройте сайт CP:**
   - Перейдите на https://www.cp.pt/pt

2. **Откройте DevTools:**
   - Нажмите `F12` или `Cmd+Option+I` (Mac)
   - Перейдите на вкладку **Network**

3. **Настройте фильтр:**
   - В поле фильтра введите: `api-gateway`
   - Убедитесь, что включен "Preserve log"

4. **Выполните поиск:**
   - На сайте CP введите маршрут (например: Carcavelos → Cais do Sodre)
   - Нажмите "Поиск" или "Pesquisar"

5. **Найдите запрос:**
   - В списке Network найдите запрос к `api-gateway.cp.pt`
   - Обычно это запрос с именем типа `trains`, `itinerary`, `search` и т.д.

6. **Скопируйте запрос:**
   - Правый клик на запросе
   - Выберите **Copy → Copy as cURL**
   - Или выберите **Copy → Copy as fetch** (JavaScript)

7. **Отправьте результат:**
   - Вставьте скопированную команду в чат
   - Или используйте `capture-headers.html` для анализа

## Способ 3: Использование расширения браузера

### Для Chrome/Edge:
- Установите расширение "Requestly" или "ModHeader"
- Включите перехват запросов
- Выполните поиск на cp.pt
- Экспортируйте запросы

## Что искать:

Важные заголовки:
- `authorization` или `Authorization` - JWT токен
- `x-api-key` - API ключ
- `User-Agent` - User agent браузера
- `Origin` - Origin запроса
- `Referer` - Referer
- Любые другие кастомные заголовки

Важные параметры URL:
- Путь эндпоинта (например: `/cp/services/travel-api/trains`)
- Параметры запроса (`from`, `to`, `date`)

## После получения данных:

Отправьте мне:
1. Полный URL запроса
2. Все заголовки (особенно Authorization)
3. Метод запроса (GET/POST)
4. Тело запроса (если POST)

Я обновлю `server.js` с правильными заголовками и эндпоинтами.




